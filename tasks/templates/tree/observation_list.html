{% extends 'base.html' %}
{% load render_assets %}

{% block content %}
<!-- Vue entry-point -->


<div class="observations">
    <div class="cont">
        {% include "menu.html" %}

        <h2>{{ thread.name }}</h2>

        <p class="menu observation with-badges">
            <a href="{% url 'public-observation-list' thread.id %}">Open <span class="badge">{{ open_count }}</span></a>
            <a href="{% url 'public-observation-list-closed' thread.id %}">Closed <span class="badge">{{ closed_count }}</span></a>
            <a href="{% url 'public-observation-add' thread.id %}">+ Add</a>
        </p>
    </div>
        {% for observation in object_list %}
        <article class="observation" id="observation-{{ observation.pk }}">

            <div class="meta">{{ observation.pub_date }} (<span class="type">{{ observation.type }}</span> <a href="{% url 'public-observation-edit' observation.thread.id observation.id %}">âœŽ</a>)</div>
            <p class="label">Situation</p>
            <div class="situation">{{ observation.situation|linebreaks }}</div>

            <div class="expand">
            <p class="label">Interpretation</p>
            <div class="interpretation">{{ observation.interpretation|linebreaks }}</div>
            <p class="label">Approach</p>
            <div class="approach">{{ observation.approach|linebreaks }}</div>

            {% if observation.update_set.all %}
                <hr class="just-line">

                {% for update in observation.update_set.all %}
                    <div class="update">
                        <p class="label">Update on {{ update.pub_date|date:"Y-m-d" }}</p>
                        <div>
                            {{ update.comment | linebreaks }}
                        </div>
                    </div>
                {% endfor %}
            {% endif %}

            {% if observation.date_closed %}

            <hr class="just-line">

            <div class="closed meta">
                <em>Closed on {{ observation.date_closed }}</em>
            </div>
            {% endif %}
            </div>
        </article>

        {% empty %}
        <div class="empty">
            No articles yet.
        </div>
        {% endfor %}
</div>

{% endblock %}

<!-- Load Vue app -->
{% block extrajs %}
{% endblock %}

